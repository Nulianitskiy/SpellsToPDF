# SpellsToPDF

React-приложение для подготовки заклинаний D&D и генерации PDF-документа.

**Live Demo:** [https://nulianitskiy.github.io/SpellsToPDF/](https://nulianitskiy.github.io/SpellsToPDF/)

## Возможности

- Фильтрация заклинаний по классу и максимальному уровню
- Поиск заклинаний по названию
- Фильтрация по конкретному уровню заклинаний (заговоры, 1 уровень и т.д.)
- Отметка заклинаний как подготовленных (три состояния: не подготовлено, подготовлено, всегда подготовлено)
- Статистика подготовленных заклинаний по уровням
- Генерация PDF-документа в двух форматах:
  - **Список** — заклинания сгруппированы по уровням с полным описанием
  - **Карточки** — компактные карточки заклинаний в формате 2 колонки
- Кнопка прокрутки наверх для удобной навигации

## Начало работы

### Установка зависимостей

```bash
npm install
```

### Запуск сервера разработки

```bash
npm run dev
```

### Сборка для production

```bash
npm run build
```

### Парсинг заклинаний

Для парсинга заклинаний из исходных данных используется скрипт:

```bash
npm run parse-spell
```

## Deploy to GitHub Pages

This project is configured for GitHub Pages via GitHub Actions.

1. Push to the `main` branch.
2. In GitHub, go to `Settings` → `Pages`.
3. Set **Source** to **GitHub Actions**.
4. Wait for the **Deploy to GitHub Pages** workflow to finish.

The site will be available at:
`https://<your-username>.github.io/SpellsToPDF/`

**Current deployment:** [https://nulianitskiy.github.io/SpellsToPDF/](https://nulianitskiy.github.io/SpellsToPDF/)

## Структура проекта

```
src/
├── components/
│   ├── SpellCard.jsx          # Отображение отдельного заклинания
│   ├── SpellFilters.jsx       # Элементы управления фильтрами
│   ├── SpellList.jsx          # Список заклинаний, сгруппированных по уровням
│   ├── SpellStatistics.jsx    # Статистика подготовленных заклинаний
│   └── ScrollToTopButton.jsx  # Кнопка прокрутки наверх
├── data/
│   ├── spells.json            # База данных заклинаний (английская версия)
│   └── spellsRu2024.json      # База данных заклинаний (русская версия 2024)
├── utils/
│   └── pdfGenerator.js        # Генерация PDF (форматы: список и карточки)
├── App.jsx                     # Главный компонент приложения
├── App.css                     # Стили приложения
└── main.jsx                    # Точка входа
```

## Добавление заклинаний

Для добавления новых заклинаний отредактируйте файл `src/data/spellsRu2024.json` (или `spells.json` для английской версии). Каждое заклинание должно следовать следующей схеме:

```json
{
  "id": "unique_spell_id",
  "name": "Название заклинания",
  "level": 1,
  "school": "Вызов",
  "casting_time": "1 действие",
  "range": "36 метров",
  "components": ["В", "С", "М"],
  "material": "опционально: описание материального компонента",
  "duration": "Мгновенное",
  "concentration": false,
  "ritual": false,
  "classes": ["Волшебник", "Чародей"],
  "description": "Описание заклинания...",
  "at_higher_levels": "Опционально: эффекты на более высоких уровнях..."
}
```

**Примечание:** Приложение использует `spellsRu2024.json` как основной источник данных (см. `src/App.jsx`).

## Технологический стек

- **React 19** + **Vite** — фреймворк и сборщик
- **html2pdf.js** — генерация PDF-документов
- **ESLint** — линтинг кода

## Особенности реализации

- **Три состояния заклинаний:**
  - Не подготовлено (по умолчанию)
  - Подготовлено (включается в PDF)
  - Всегда подготовлено (включается в PDF, отдельно отображается в статистике)

- **Форматы PDF:**
  - **Список** — структурированный список с полным описанием, сгруппированный по уровням
  - **Карточки** — компактные карточки в формате 2 колонки для удобного просмотра

- **Статистика:**
  - Отображение количества подготовленных заклинаний по каждому уровню
  - Разделение на "подготовлено" и "всегда подготовлено"
  - Общее количество выбранных заклинаний
